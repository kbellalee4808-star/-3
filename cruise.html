
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>크루즈 금액 계산 | 프라이빗 크루즈 클럽</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-gray-900">
  <main class="max-w-3xl mx-auto px-6 py-16">
    <header class="mb-10">
      <a href="index.html" class="text-sm text-gray-500 hover:text-gray-900">← 메인으로</a>
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight mt-3">
        크루즈 금액 계산
      </h1>
      <p class="text-gray-500 mt-3 text-base md:text-lg">
        비회원가를 입력하면 멤버가(50%)가 자동 계산되고, 리워드 적용 후 최종 금액이 계산됩니다.
      </p>
    </header>

    <section class="border rounded-3xl p-6 md:p-8 space-y-6">
      <!-- 비회원가 -->
      <div>
        <label class="block text-lg font-bold mb-2">비회원 크루즈 금액 (원)</label>
        <input id="nonPrice" type="number" inputmode="numeric" placeholder="예: 6000000"
               class="w-full border rounded-2xl p-4 text-lg outline-none focus:ring-2 focus:ring-yellow-300"
               oninput="calc()" />
        <p class="text-xs text-gray-400 mt-2">* 미입력 시 0원으로 계산됩니다.</p>
      </div>

      <!-- 3 버튼(표시용) -->
      <div class="grid grid-cols-3 gap-3">
        <div class="rounded-2xl border p-4 text-center">
          <p class="text-sm text-gray-500">비회원</p>
          <p class="text-lg font-extrabold mt-1" id="showNon">0원</p>
        </div>

        <div class="rounded-2xl border p-4 text-center bg-blue-50">
          <p class="text-sm text-gray-500">멤버 (50%)</p>
          <p class="text-lg font-extrabold mt-1" id="showMember">0원</p>
        </div>

        <div class="rounded-2xl border p-4 text-center bg-green-50">
          <p class="text-sm text-gray-500">리워드 적용 후</p>
          <p class="text-lg font-extrabold mt-1" id="showFinal">0원</p>
        </div>
      </div>

      <!-- 리워드 -->
      <div>
        <label class="block text-lg font-bold mb-2">리워드 사용 (원)</label>
        <input id="reward" type="number" inputmode="numeric" placeholder="예: 1200000"
               class="w-full border rounded-2xl p-4 text-lg outline-none focus:ring-2 focus:ring-yellow-300"
               oninput="calc()" />
        <p class="text-xs text-gray-400 mt-2">* 미입력 시 0원으로 계산됩니다.</p>
      </div>

      <!-- 그래픽 바(밝은색) -->
      <div class="space-y-3 pt-2">
        <div>
          <div class="flex items-center justify-between text-sm mb-1">
            <span class="text-gray-500">비회원 기준</span>
            <span id="barTextNon" class="font-semibold">0원</span>
          </div>
          <div class="h-3 rounded-full bg-gray-100 overflow-hidden">
            <div id="barNon" class="h-3 bg-gray-200 rounded-full" style="width: 100%"></div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between text-sm mb-1">
            <span class="text-gray-500">멤버 적용</span>
            <span id="barTextMember" class="font-semibold">0원</span>
          </div>
          <div class="h-3 rounded-full bg-blue-100 overflow-hidden">
            <div id="barMember" class="h-3 bg-blue-200 rounded-full" style="width: 0%"></div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between text-sm mb-1">
            <span class="text-gray-500">리워드 적용 후</span>
            <span id="barTextFinal" class="font-semibold">0원</span>
          </div>
          <div class="h-3 rounded-full bg-green-100 overflow-hidden">
            <div id="barFinal" class="h-3 bg-green-200 rounded-full" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- 최종 -->
      <div class="rounded-3xl bg-gradient-to-br from-yellow-50 to-white border p-6 md:p-7">
        <p class="text-gray-600 font-medium">최종 크루즈 비용</p>
        <p class="text-3xl md:text-4xl font-extrabold mt-2">
          <span id="finalBig">0</span><span class="text-base font-bold ml-1">원</span>
        </p>
        <p class="text-xs text-gray-400 mt-3 leading-relaxed">
          * 본 계산은 이해를 돕기 위한 참고용 시뮬레이션입니다. 실제 적용 조건은 멤버십 상태/객실 상황 등에 따라 달라질 수 있으며 모든 기준은 가입 후 공식 안내를 따릅니다.
        </p>

        <div class="mt-6 flex flex-col md:flex-row gap-3">
          <button onclick="saveToMain()"
                  class="w-full md:w-auto inline-flex justify-center rounded-full px-6 py-4 font-extrabold bg-gray-900 text-white hover:opacity-90 transition">
            이 금액을 메인에 반영하기
          </button>
          <a href="https://open.kakao.com/o/본인링크"
             class="w-full md:w-auto inline-flex justify-center rounded-full px-6 py-4 font-bold border hover:bg-gray-50 transition">
            오픈카톡 상담하기
          </a>
        </div>
      </div>
    </section>
  </main>

  <script>
    function fmt(n) { return Number(n || 0).toLocaleString('ko-KR') + "원"; }
    function fmtPlain(n) { return Number(n || 0).toLocaleString('ko-KR'); }
    function getVal(id) {
      const v = document.getElementById(id).value;
      return v === "" ? 0 : Number(v);
    }

    function calc() {
      const non = getVal("nonPrice");
      const reward = getVal("reward");

      const member = Math.round(non * 0.5);
      const final = Math.max(member - reward, 0);

      // 상단 3칸 표시
      document.getElementById("showNon").innerText = fmt(non);
      document.getElementById("showMember").innerText = fmt(member);
      document.getElementById("showFinal").innerText = fmt(final);

      // 바 텍스트
      document.getElementById("barTextNon").innerText = fmt(non);
      document.getElementById("barTextMember").innerText = fmt(member);
      document.getElementById("barTextFinal").innerText = fmt(final);

      // 최종 큰 숫자
      document.getElementById("finalBig").innerText = fmtPlain(final);

      // 바 길이 (기준: 비회원=100)
      const base = non > 0 ? non : 1;
      const wMember = Math.min((member / base) * 100, 100);
      const wFinal = Math.min((final / base) * 100, 100);

      document.getElementById("barNon").style.width = "100%";
      document.getElementById("barMember").style.width = wMember.toFixed(1) + "%";
      document.getElementById("barFinal").style.width = wFinal.toFixed(1) + "%";

      // 입력값 임시 저장(새로고침 대비)
      localStorage.setItem("cruiseNonKRW", String(non));
      localStorage.setItem("cruiseRewardKRW", String(reward));
      localStorage.setItem("cruiseFinalKRW_tmp", String(final));
    }

    function restore() {
      const non = localStorage.getItem("cruiseNonKRW");
      const reward = localStorage.getItem("cruiseRewardKRW");
      if (non !== null) document.getElementById("nonPrice").value = non;
      if (reward !== null) document.getElementById("reward").value = reward;
      calc();
    }

    function saveToMain() {
      const final = Number(localStorage.getItem("cruiseFinalKRW_tmp") || 0);
      localStorage.setItem("cruiseFinalKRW", String(final));
      // 메인으로 이동
      window.location.href = "index.html";
    }

    restore();
  </script>
</body>
</html>
